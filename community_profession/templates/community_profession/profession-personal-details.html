{% extends 'community_profession/index.html' %}
{% load static %}
{% block title %}
<title>Profession Personal Details</title>
{% endblock title %}
{% block own_css %}
<!--   own css   -->
<link rel="stylesheet" href="{% static 'community_profession/css/profession-personal-details.css' %}">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="{% static 'community_profession/css/community/ask-post-pop-up-css.css' %}">
<!-- Start rating CSS -->
<!--<style>
   *{
   margin: 0;
   padding: 0;
   }
   .rate {
   float: left;
   height: 46px;
   padding: 0 10px;
   }
   .rate:not(:checked) > input {
   position:absolute;
   top:-9999px;
   }
   .rate:not(:checked) > label {
   float:right;
   width:1em;
   overflow:hidden;
   white-space:nowrap;
   cursor:pointer;
   font-size:30px;
   color:#ccc;
   }
   .rate:not(:checked) > label:before {
   content: 'â˜… ';
   }
   .rate > input:checked ~ label {
   color: #ffc700;
   }
   .rate:not(:checked) > label:hover,
   .rate:not(:checked) > label:hover ~ label {
   color: #deb217;
   }
   .rate > input:checked + label:hover,
   .rate > input:checked + label:hover ~ label,
   .rate > input:checked ~ label:hover,
   .rate > input:checked ~ label:hover ~ label,
   .rate > label:hover ~ input:checked ~ label {
   color: #c59b08;
   }
   /* Modified from: https://github.com/mukulkant/Star-rating-using-pure-css */
</style>-->
<!-- End rating CSS -->
<!-- Start Services CSS -->
<style>
   body {
   background-color:#E7E9EB;
   }
   #myDIV {
   height:15.625rem;
   }
   .ex1 {
   width: 9.375rem;
   height: 15rem;
   overflow:auto;
   }
</style>
<!-- End Services CSS -->

<!-- Start whatsapp - go to chat -->
<style>
.fa-brands-1 {
  padding: 0px;
  font-size: 30px;
  width: 30px;
  text-align: center;
  text-decoration: none;
  border-radius: 50%;
}

.fa-brands-1:hover {
    opacity: 0.7;
}

.fa-whatsapp-1 {
  background: #51CE5E;
  color: white;
}
</style>
<!-- End whatsapp - go to chat -->
<link rel="stylesheet" href="/static/community_profession/css/community/community.css">

<!-- Start our Star rating -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.0/jquery.min.js" type="text/javascript"></script>
<link href="{% static 'community_profession/css/rating.css' %}" type="text/css" rel="stylesheet"/>
<SCRIPT type="text/javascript">
function replace_stars(value){
	var html="\n";
	var i;
	for(i=1;i<=5;i++){
		html+=" <input class='star' type='radio' name='rating' value='"+i+"' "+(value==i?"checked='checked'":"")+" />\n";
	}
	html+="<script type='text/javascript'>\n";
	html+="  $('#container').find('.star').rating({\n";
	html+="    callback: function(){ this.form.onsubmit() && this.form.submit(); }\n"
	html+="  });\n";
	html+="</"+"script>\n";
	$("#code").val(html);
	$("#container").html(html);
}
$(document).ready(function(){
 replace_stars(3);
});
</SCRIPT>
<!-- End our Star rating -->

{% endblock own_css %}
{% block content %}
<!-- Start girls parlor heading -->
<div class="row">
   <div class="col-md-12 girls-parlor-heading">
      {{Profession_obj.profession.Profession_Name}}
   </div>
</div>
<!-- End girls parlor heading -->
<!-- Start profile-img and info -->
<div class="row pb-3">
   <!-- Start profile-img -->
   <div class="col-2 col-sm-3 col-md-2">
      <img src="{{Profession_obj.profession_image.url}}" class="img-fluid rounded" alt="Responsive image">
   </div>
   <!-- Start profile-img -->
   <!-- Start info -->
   <div class="col-10 col-sm-9 col-md-10 personal-info">
      <!-- Start name info -->
      <div class="row">
         <div class="col-3  col-sm-2  col-md-2 sub-heading">
            Name
         </div>
         <div class="col-9 col-sm-10 col-md-10 content">
            : {{Profession_obj.shop_name}}
         </div>
      </div>
      <!-- End name info -->
      <!-- Start profession -->
      <div class="row">
         <div class="col-3  col-sm-2  col-md-2 sub-heading">
            Profession
         </div>
         <div class="col-9 col-sm-10 col-md-10 content">
            : {{Profession_obj.profession.Profession_Name}}
         </div>
      </div>
      <!-- End profession -->
      <!-- Start Address -->
      <div class="row">
         <div class="col-3  col-sm-2  col-md-2 sub-heading">
            Address
         </div>
         <div class="col-9 col-sm-10 col-md-10 content">
            : {{Profession_obj.shop_address}} {{Profession_obj.shop_city}}, {{Profession_obj.shop_state}}
         </div>
      </div>
      <!-- End Address -->
      <!-- Start Experience -->
      <div class="row">
         <div class="col-3  col-sm-2  col-md-2 sub-heading">
            Experience
         </div>
         <div class="col-9 col-sm-10 col-md-10 content">
            : {{Profession_obj.year_of_experience}} Year
         </div>
      </div>
      <!-- End Experience -->
      <!-- Start Rating -->
      <div class="row">
         <div class="col-3  col-sm-2  col-md-2 sub-heading">
            Rating
         </div>
         <div class="col-9 col-sm-10 col-md-10 content">
            :
            <img class="img-fluid" src="{% static 'community_profession/img/flag.png' %}" alt="Chania">
            <!-- <img class="img-fluid" src="{% static 'community_profession/img/flag.png' %}" alt="Chania">
               <img class="img-fluid" src="{% static 'community_profession/img/flag.png' %}" alt="Chania">
               <img class="img-fluid" src="{% static 'community_profession/img/flag.png' %}" alt="Chania">
               <img class="img-fluid" src="{% static 'community_profession/img/flag.png' %}" alt="Chania"> -->
               {{Profession_obj.Profession_Rating}}
         </div>
      </div>
      <!-- End Rating -->
   </div>
   <!-- Start info -->
</div>
<!-- End profile-img and info -->
<!-- Start time & open status, our services, add new service btn -->
<div class="row pt-3 pb-3 border-top border-bottom">
   <!-- Start time and open status -->
   <div class="col-12 col-sm-3 col-md-4 border-right  time-open-status">
      <!-- Start time & open status heading -->
      <div class="row">
         <div class="col-12 col-sm-12 col-md-12 heading">
            Times & Open Status
         </div>
      </div>
      <!-- End time & open status heading -->
      <!-- Start time heading -->
      <div class="row">
         <div class="col-12 col-sm-12 col-md-12 time-heading">
            Time : {{Profession_obj.shop_start_time}} to {{Profession_obj.shop_close_time}}
         </div>
      </div>
      <!-- End time heading -->
      <!-- Start open status Sunday -->
      <div class="row">
         {% if Profession_obj.shop_status_sunday%}
         <!-- Start open status heading -->
         <div class="col-6 col-sm-6 col-md-6 open-status-heading">Sunday</div>
         <!-- End open status heading -->
         <!-- Start open status content -->
         <div class="col-6 col-sm-6 col-md-6 status-content"> : Open</div>
         <!-- End open status content -->
         {% else %}
         <!-- Start open status heading -->
         <div class="col-6 col-sm-6 col-md-6 open-status-heading">Sunday</div>
         <!-- End open status heading -->
         <!-- Start open status content -->
         <div class="col-6 col-sm-6 col-md-6 status-content"> : Close</div>
         <!-- End open status content -->
         {% endif %}
      </div>
      <!-- End open status Sunday -->
      <!-- Start open status Monday -->
      <div class="row">
         {% if Profession_obj.shop_status_monday%}
         <!-- Start open status heading -->
         <div class="col-6 col-sm-6 col-md-6 open-status-heading">Monday</div>
         <!-- End open status heading -->
         <!-- Start open status content -->
         <div class="col-6 col-sm-6 col-md-6 status-content">: Open</div>
         <!-- End open status content -->
         {% else %}
         <!-- Start open status heading -->
         <div class="col-6 col-sm-6 col-md-6 open-status-heading">Monday</div>
         <!-- End open status heading -->
         <!-- Start open status content -->
         <div class="col-6 col-sm-6 col-md-6 status-content">: Close</div>
         <!-- End open status content -->
         {% endif %}
      </div>
      <!-- End open status Monday -->
      <!-- Start open status Tuesday -->
      <div class="row">
         {% if Profession_obj.shop_status_Tuesday%}
         <!-- Start open status heading -->
         <div class="col-6 col-sm-6 col-md-6 open-status-heading">Tuesday</div>
         <!-- End open status heading -->
         <!-- Start open status content -->
         <div class="col-6 col-sm-6 col-md-6 status-content">: Open</div>
         <!-- End open status content -->
         {% else %}
         <!-- Start open status heading -->
         <div class="col-6 col-sm-6 col-md-6 open-status-heading">Tuesday</div>
         <!-- End open status heading -->
         <!-- Start open status content -->
         <div class="col-6 col-sm-6 col-md-6 status-content">: Close</div>
         <!-- End open status content -->
         {% endif %}
      </div>
      <!-- End open status Tuesday -->
      <!-- Start open status Wednesday -->
      <div class="row">
         {% if Profession_obj.shop_status_Wednesday%}
         <!-- Start open status heading -->
         <div class="col-6 col-sm-6 col-md-6 open-status-heading">Wednesday</div>
         <!-- End open status heading -->
         <!-- Start open status content -->
         <div class="col-6 col-sm-6 col-md-6 status-content">: Open</div>
         <!-- End open status content -->
         {% else %}
         <!-- Start open status heading -->
         <div class="col-6 col-sm-6 col-md-6 open-status-heading">Wednesday</div>
         <!-- End open status heading -->
         <!-- Start open status content -->
         <div class="col-6 col-sm-6 col-md-6 status-content">: Close</div>
         <!-- End open status content -->
         {% endif %}
      </div>
      <!-- End open status Wednesday -->
      <!-- Start open status Thursday -->
      <div class="row">
         {% if Profession_obj.shop_status_Thrusday%}
         <!-- Start open status heading -->
         <div class="col-6 col-sm-6 col-md-6 open-status-heading">Thursday</div>
         <!-- End open status heading -->
         <!-- Start open status content -->
         <div class="col-6 col-sm-6 col-md-6 status-content">: Open</div>
         <!-- End open status content -->
         {% else %}
         <!-- Start open status heading -->
         <div class="col-6 col-sm-6 col-md-6 open-status-heading">Thursday</div>
         <!-- End open status heading -->
         <!-- Start open status content -->
         <div class="col-6 col-sm-6 col-md-6 status-content">: Close</div>
         <!-- End open status content -->
         {% endif %}
      </div>
      <!-- End open status Thursday -->
      <!-- Start open status Friday -->
      <div class="row">
         {% if Profession_obj.shop_status_Friday%}
         <!-- Start open status heading -->
         <div class="col-6 col-sm-6 col-md-6 open-status-heading">Friday</div>
         <!-- End open status heading -->
         <!-- Start open status content -->
         <div class="col-6 col-sm-6 col-md-6 status-content">: Open</div>
         <!-- End open status content -->
         {% else %}
         <!-- Start open status heading -->
         <div class="col-6 col-sm-6 col-md-6 open-status-heading">Friday</div>
         <!-- End open status heading -->
         <!-- Start open status content -->
         <div class="col-6 col-sm-6 col-md-6 status-content">: Close</div>
         <!-- End open status content -->
         {% endif %}
      </div>
      <!-- End open status Friday -->
      <!-- Start open status Saturday -->
      <div class="row">
         {% if Profession_obj.shop_status_saturday%}
         <!-- Start open status heading -->
         <div class="col-6 col-sm-6 col-md-6 open-status-heading">Saturday</div>
         <!-- End open status heading -->
         <!-- Start open status content -->
         <div class="col-6 col-sm-6 col-md-6 status-content">: Open</div>
         <!-- End open status content -->
         {% else %}
         <!-- Start open status heading -->
         <div class="col-6 col-sm-6 col-md-6 open-status-heading">Saturday</div>
         <!-- End open status heading -->
         <!-- Start open status content -->
         <div class="col-6 col-sm-6 col-md-6 status-content">: Close</div>
         <!-- End open status content -->
         {% endif %}
      </div>
      <!-- End open status Saturday -->
   </div>
   <!-- End time and open status -->
   <!-- Start our services -->
   <div class="col-12 col-sm-9 col-md-8 pl-5 our-services">
      <!-- Start our services heading -->
      <div class="row">
         <div class="col-12 col-sm-12 col-md-12 our-services-heading">
            Our Services
         </div>
      </div>
      <!-- End our services heading -->
      <!-- Start Services -->
      <div class="row" id="myDIV">
         <div class="col-12 col-sm-12 col-md-12 ex1">
            {% for s in Profession_service_obj%}
            <div class="row mt-2 pt-2 rounded services">
               <!-- Start Service heading -->
               <div class="col-7 col-sm-9 col-md-9">{{s.service_name}}</div>
               <!-- End Service heading -->
               <!-- Start price, edit, delete -->
               <div class="col-5 col-sm-3 col-md-3 text-center">
                  <span>Rs : {{s.service_price}}</span>
               </div>
               <!-- End price, edit, delete -->
            </div>
            {% endfor %}
         </div>
      </div>
      <!-- End Services -->
   </div>
   <!-- End our services -->
</div>
<!-- End time & open status, our services, add new service bt -->
<!-- Start Photos & videos heading, See All links headings -->
<div class="row photos-videos-see-all">
   <!-- Start Photos and Videos Heading -->
   <div class="col-6 col-md-6">
      <div class="row">
         <div class="col-md-12 photos-videos-heading">
            Photos & Videos
         </div>
      </div>
   </div>
   <!-- End Photos and Videos Heading -->
   <!-- Start see all links -->
   <div class="col-6 col-md-6 text-right">
      <div class="row">
         <div class="col-md-12 text-right ">
            <a href="{% url 'see-all-photos-videos' Profession_obj.id %}" class="see-all">
            See All
            </a>
         </div>
      </div>
   </div>
   <!-- Start see all links -->
</div>
<!-- End Photos & videos heading, See All links headings -->
<!-- Start Photos & videos -->
<div class="row">
   <div class="col-12 col-sm-12 col-md-12 p-4">
      <div class="row profession-details">
         {% for j in Profession_Image_obj %}
         <div class="col-12 col-sm-2 col-md-2 pt-3">
            <div class="row">
               <div class="col-md-12">
                  <a href="{% url 'photo-screen' j.id %}" class="text-light">
                  <img src="{{j.image.url}}" class="img-fluid " width="100%" height="30%">
                  </a>
               </div>
            </div>
         </div>
         {% endfor %}
         {% for i in Profession_Video_obj %}
         <div class="col-12 col-sm-3 col-md-3 pt-3">
            <div class="row">
               <div class="col-md-12 profession-video rounded">
                  <a href="{% url 'video-screen' i.id %}" class="text-light text-decoration-none">
                     <video src="{{i.video.url}}" class="video-fluid " width="100%" controls></video>
                  </a>
               </div>
            </div>
         </div>
         {% endfor %}
         <!-- <div class="col-md-3 pl-4 pr-4 mt-2">
            <div class="row">
               <div class="col-md-12 p-5 bg-info rounded"></div>
            </div>
            </div> -->
         <!-- <div class="col-md-3 pl-4 pr-4 mt-2">
            <div class="row">
               <div class="col-md-12 p-5 bg-info rounded"></div>
            </div>
            </div> -->
         <!-- <div class="col-md-3 pl-4 pr-4 mt-2">
            <div class="row">
               <div class="col-md-12 p-5 bg-info rounded"></div>
            </div>
            </div> -->
      </div>
   </div>
</div>
<!-- End Photos & videos -->
<!-- Satrt Comment input, Chat button -->
<form action="{% url 'profession-personal-details' Profession_obj.id %}" method="POST" >
   {% csrf_token %}
   <div class="row">
      <div class="col-7 col-sm-8 col-md-8">
         <div class="form-group comment-input" >
            <textarea maxlength="300" class="form-control" type="text" placeholder="Write a Comment" name="Comment" required></textarea>
            <div id="container"></div>
         </div>

         
       



      </div>
      <div class="col-3 col-sm-2 col-md-2 ">
         <button type="submit" class="btn btn-block btn-normal-b">Send</button>
      </div>
      <div class="col-1 col-sm-2 col-md-2 pt-2">
         <a href="https://api.whatsapp.com/send/?phone={{Profession_obj.UserProfile.country_code}}{{Profession_obj.UserProfile.whatsapp_number}}&text&type=phone_number" class="text-light" target="_blank">
            <i class="fa-brands fa-whatsapp fa-brands-1 fa-whatsapp-1"></i>
         </a>
      </div>
   </div>
</form>
<!-- End Comment input, Chat button -->
<!-- Start Review -->
<div class="row">
   <div class="col-md-12 reviews">
      <!-- Start Reviews Heading -->
      <div class="row">
         <div class="col-md-12 reviews-heading">
            {{ProfessionReview_obj_count}} Reviews
         </div>
      </div>
      <!-- End Reviews Heading -->
      {% for k in ProfessionReview_obj %}
      <!-- Start user profile and user information -->
      <div class="row mt-5">
         <!-- Start user profile -->
         <div class="col-md-1 review-profile">
            <img src="{{k.user_profile.profile_image.url}}" class="img-fluid rounded-circle" alt="Responsive image" height="50" width="50">
         </div>
         <!-- End user profile -->
         <!-- Start User information -->
         <div class="col-md-11">
            <!-- Start User Name -->
            <div class="row">
               <div class="col-md-12 user-name-heading">
                  {{k.user_profile.usertype.user_id.first_name}} {{k.user_profile.usertype.user_id.last_name}}
               </div>
            </div>
            <!-- End User Name -->
            <!-- Start date -->
            <div class="row">
               <div class="col-md-12 reviews-date">
                  {{k.Review_Date}} / {{k.Review_Time}} 
                  <!-- ago. -->
               </div>
            </div>
            <!-- End date -->
         </div>
         <!-- End User information -->
      </div>
      <!-- End user profile and user information -->
      <!-- Start comment -->
      <div class="row mt-1">
         <div class="col-md-12 review-comment">
            {{k.Review}}
         </div>
      </div>
      <!-- End comment -->
      <!-- Start rating, like and comment -->
      <div class="row">
         <div class="col-md-12">
            <span class="likes-heading">
            <img src="{% static 'community_profession/img/indian-flag-icon.png' %}" class="img-fluid d-inline-block" alt="Responsive image"> &nbsp; {{k.Rate}}
            </span>
            <span class="d-inline-block">
               <form action="{% url 'like_Review' %}" method="POST" class="like-form" id="{{k.id}}">
                  {% csrf_token %}
                  <input type="hidden" name="post_id" value="{{k.id}}">
                     <button type="submit" class="btn community-like-dislike-btn like-btn{{k.id}}">
                        {% if userprofile not in k.like.all %}
                           <i class="fa-solid fa-thumbs-up"></i>
                        {% else %}
                           <i class="fa-solid fa-thumbs-down"></i>
                        {% endif %} 
                     </button>
                  <span class="btn community-like-dislike-btn like-count{{k.id}}">{{ k.like.all.count }}</span>
               </form>
            </span>
            <span >
               <a href="{% url 'review_Reply' k.id %}" class="text-decoration-none likes-heading">
                  <i class="fa-solid fa-reply pl-3"></i> &nbsp;
                     {% if k.Reply is None %}
                     0
                     {% else %}
                     {{k.Reply}}
                     {% endif %}
                  </a>

            </span>
            
            {% if userprofile.id is k.user_profile.id %}
            <span >
               <a href="#" class="text-decoration-none likes-heading" data-target="#modal3" data-toggle="modal" onclick="data('{{k.id}}','{{k.Review}}')" >
                  <i class="fa-solid fa-pencil pl-3"></i> &nbsp; 
               </a>

            </span>
            
            <span >
               <a href="{% url 'Review_Delete' k.id %}" class="text-decoration-none likes-heading">
                  <i class="fa-solid fa-trash pl-3"></i> &nbsp;
               </a>

            </span>
            {% endif %}
         </div>
      </div>
      <!-- End rating, like and comment -->
      {% endfor %}
   </div>
</div>
<!-- End Review -->
<div class="modal create-community-modeal" id="modal3">
   <div class="modal-dialog modal-lg">
      <div class="modal-content">
         <div class="modal-header">
            <h5 class="modal-title">Edit Review</h5>
            <a href="#" data-dismiss="modal" class="close">&times;</a>
         </div>
         <form action="" id="EditReview" method="POST">
            {% csrf_token %}
            <div class="modal-body">
               <div class="form-group">
                  <label for="" class="modal-sub-heading">Review</label>
                  <input type="text" class="form-control" name="Review" id="demo1" required="true">
               </div>
            </div>
            <div class="modal-footer">
               <button class="btn btn-cancel" data-dismiss="modal">Cancel</button>
               <a href="#">
               <button type="submit" class="btn btn-normal-b">Update Review</button>
               </a>
            </div>
         </form>
      </div>
   </div>
</div>
<script>
   function data(id,val1){
      document.getElementById('EditReview').action ='/edit_review/'+id;
      document.getElementById("demo1").value = val1;
   }
</script>

<!-- Start Star rating JS -->
<!--<script src="{% static 'community_profession/js/jquery.rating.js' %}" type="text/javascript" language="javascript"></script>-->
<script>
   /*
 ### jQuery Star Rating Plugin v4.11 - 2013-03-14 ###
 * Home: https://star-rating.fyneworks.com/
 * Code: http://code.google.com/p/jquery-star-rating-plugin/
 *
	* Licensed under http://en.wikipedia.org/wiki/MIT_License
 ###
*/

/*# AVOID COLLISIONS #*/
;
if (window.jQuery)(function($) {
	/*# AVOID COLLISIONS #*/

	// IE6 Background Image Fix
	if ((!$.support.opacity && !$.support.style)) try {
		document.execCommand("BackgroundImageCache", false, true);
	} catch (e) {

	}
	// Thanks to http://www.visualjquery.com/rating/rating_redux.html

	// plugin initialization
	$.fn.rating = function(opts) {
		if (this.length === 0) return this; // quick fail

		// Handle API methods
		if (typeof arguments[0] == 'string') {
			// Perform API methods on individual elements
			if (this.length > 1) {
				var args = arguments;
				return this.each(function() {
					$.fn.rating.apply($(this), args);
				});
			}

			// Invoke API method handler
			$.fn.rating[arguments[0]].apply(this, $.makeArray(arguments).slice(1) || []);
			// Quick exit...
			return this;
		}

		// Initialize options for this call
		var options = $.extend({} /* new object */ ,
			$.fn.rating.options /* default options */ ,
			opts || {} /* just-in-time options */
		);

		// Allow multiple controls with the same name by making each call unique
		$.fn.rating.calls++;

		// loop through each matched element
		this
			.not('.star-rating-applied')
			.addClass('star-rating-applied')
			.each(function() {

				// Load control parameters / find context / etc
				var control, input = $(this);
				var control_name = (this.name || options.name || 'unnamed-rating' + (options.stars ? '-' + $.fn.rating.calls : '')).replace(/\[|\]/g, '_').replace(/^\_+|\_+$/g, '');
				var context = $(this.form || document.body);

				// issue #10 - https://github.com/fyneworks/star-rating/issues/10
				if (!input.is('input')) {
					if (options.stars) {

						// insert newly created form elements
						input.html(Array(options.stars + 1).join(
							'<input type="radio" name="' + control_name + '"/>'
						));

						return input.find('input').each(function(i) {
								// set element values.
								// accepts an array in options.values
								// or defaults to numbers from 1 to options.stars
								$(this).val(options.values ? options.values[i] : i + 1)

							})
							.rating(options);
					} else {
						throw "Invalid star rating plugin call";
						return;
					};
				};

				// FIX: http://code.google.com/p/jquery-star-rating-plugin/issues/detail?id=23
				var raters = context.data('rating');
				if (!raters || raters.call != $.fn.rating.calls) raters = {
					count: 0,
					call: $.fn.rating.calls
				};
				var rater = raters[control_name] || context.data('rating' + control_name);

				// if rater is available, verify that the control still exists
				if (rater) control = rater.data('rating');

				if (rater && control) //{// save a byte!
					// add star to control if rater is available and the same control still exists
					control.count++;

				//}// save a byte!
				else {
					// create new control if first star or control element was removed/replaced

					// Initialize options for this rater
					control = $.extend({} /* new object */ ,
						options || {} /* current call options */ ,
						($.metadata ? input.metadata() : ($.meta ? input.data() : null)) || {}, /* metadata options */ {
							count: 0,
							stars: [],
							inputs: []
						}
					);

					// increment number of rating controls
					control.serial = raters.count++;

					// create rating element
					rater = $('<span class="star-rating-control" aria-hidden="true" />');
					input.before(rater);

					// Mark element for initialization (once all stars are ready)
					rater.addClass('rating-to-be-drawn');

					// Accept readOnly setting from 'disabled' property
					if (input.attr('disabled') || input.hasClass('disabled')) control.readOnly = true;

					// Accept required setting from class property (class='required')
					if (input.hasClass('required')) control.required = true;

					// Create 'cancel' button
					rater.append(
						control.cancel = $('<div class="rating-cancel rater-cancel-' + control.serial + '"><a title="' + control.cancel + '">' + control.cancelValue + '</a></div>')
						.on('mouseover', function() {
							$(this).rating('drain');
							$(this).addClass('star-rating-hover');
							//$(this).rating('focus');
						})
						.on('mouseout', function() {
							$(this).rating('draw');
							$(this).removeClass('star-rating-hover');
							//$(this).rating('blur');
						})
						.on('click', function() {
							$(this).rating('select');
						})
						.data('rating', control)
					);

				} // first element of group

				// insert rating star (thanks Jan Fanslau rev125 for blind support https://code.google.com/p/jquery-star-rating-plugin/issues/detail?id=125)
				var star = $('<div role="text" aria-label="' + (this.title || this.value) + '" class="star-rating rater-' + control.serial + '"><a title="' + (this.title || this.value) + '">' + this.value + '</a></div>');
				rater.append(star);

				// inherit attributes from input element
				if (this.id) star.attr('id', this.id);
				if (this.className) star.addClass(this.className);

				// Google Code Suggestion 144 - https://code.google.com/p/jquery-star-rating-plugin/issues/detail?id=144
				for (datum in $(this).data()) {
					star.data(datum, $(this).data(datum));
				};

				// Half-stars?
				if (control.half) control.split = 2;

				// Prepare division control
				if (typeof control.split == 'number' && control.split > 0) {
					var stw = ($.fn.width ? star.width() : 0) || control.starWidth;
					var spi = (control.count % control.split),
						spw = Math.floor(stw / control.split);
					star
						// restrict star's width and hide overflow (already in CSS)
						.width(spw)
						// move the star left by using a negative margin
						// this is work-around to IE's stupid box model (position:relative doesn't work)
						.find('a').css({
							'margin-left': '-' + (spi * spw) + 'px'
						});
				}

				// readOnly?
				if (control.readOnly) //{ //save a byte!
					// Mark star as readOnly so user can customize display
					star.addClass('star-rating-readonly');
				//}  //save a byte!

				else {
					// Enable hover css effects
					star.addClass('star-rating-live')
						// Attach mouse events
						.on('mouseover', function() {
							$(this).rating('fill');
							$(this).rating('focus');
						})
						.on('mouseout', function() {
							$(this).rating('draw');
							$(this).rating('blur');
						})
						.on('click', function() {
							$(this).rating('select');
						});
				} //save a byte!

				// set current selection
				if (this.checked) control.current = star;

				// set current select for links
				if (this.nodeName == "A") {
					if ($(this).hasClass('selected')) control.current = star;
				}

				// hide input element
				input.css({
					"position": "absolute",
					"left": "-9999em"
				});

				// backward compatibility, form element to plugin
				input.on('change.rating', function(event) {
					if (event.selfTriggered) return false;
					$(this).rating('select');
				});

				// attach reference to star to input element and vice-versa
				star.data('rating.input', input.data('rating.star', star));

				// store control information in form (or body when form not available)
				control.stars[control.stars.length] = star[0];
				control.inputs[control.inputs.length] = input[0];
				control.rater = raters[control_name] = rater;
				control.context = context;

				input.data('rating', control);
				rater.data('rating', control);
				star.data('rating', control);
				context.data('rating', raters);
				context.data('rating' + control_name, rater); // required for ajax forms
			}); // each element

		// Initialize ratings (first draw)
		$('.rating-to-be-drawn').rating('draw').removeClass('rating-to-be-drawn');

		return this; // don't break the chain...
	};

	/*--------------------------------------------------------*/

	/*
		### Core functionality and API ###
	*/
	$.extend($.fn.rating, {
		// Used to append a unique serial number to internal control ID
		// each time the plugin is invoked so same name controls can co-exist
		calls: 0,

		focus: function() {
			var control = this.data('rating');
			if (!control) return this;
			if (!control.focus) return this; // quick fail if not required
			// find data for event
			var input = $(this).data('rating.input') || $(this.tagName == 'INPUT' ? this : null);
			// focus handler, as requested by focusdigital.co.uk
			if (control.focus) control.focus.apply(input[0], [input.val(), $('a', input.data('rating.star'))[0]]);
		}, // $.fn.rating.focus

		blur: function() {
			var control = this.data('rating');
			if (!control) return this;
			if (!control.blur) return this; // quick fail if not required
			// find data for event
			var input = $(this).data('rating.input') || $(this.tagName == 'INPUT' ? this : null);
			// blur handler, as requested by focusdigital.co.uk
			if (control.blur) control.blur.apply(input[0], [input.val(), $('a', input.data('rating.star'))[0]]);
		}, // $.fn.rating.blur

		fill: function() { // fill to the current mouse position.
			var control = this.data('rating');
			if (!control) return this;
			// do not execute when control is in read-only mode
			if (control.readOnly) return;
			// Reset all stars and highlight them up to this element
			this.rating('drain');
			this.prevAll().addBack().filter('.rater-' + control.serial).addClass('star-rating-hover');
		}, // $.fn.rating.fill

		drain: function() { // drain all the stars.
			var control = this.data('rating');
			if (!control) return this;
			// do not execute when control is in read-only mode
			if (control.readOnly) return;
			// Reset all stars
			control.rater.children().filter('.rater-' + control.serial).removeClass('star-rating-on').removeClass('star-rating-hover');
		}, // $.fn.rating.drain

		draw: function() { // set value and stars to reflect current selection
			var control = this.data('rating');
			if (!control) return this;
			// Clear all stars
			this.rating('drain');
			// Set control value
			var current = $(control.current); //? control.current.data('rating.input') : null );
			var starson = current.length ? current.prevAll().addBack().filter('.rater-' + control.serial) : null;
			if (starson) starson.addClass('star-rating-on');
			// Show/hide 'cancel' button
			control.cancel[control.readOnly || control.required ? 'hide' : 'show']();
			// Add/remove read-only classes to remove hand pointer
			this.siblings()[control.readOnly ? 'addClass' : 'removeClass']('star-rating-readonly');
		}, // $.fn.rating.draw





		select: function(value, wantCallBack) { // select a value
			var control = this.data('rating');
			if (!control) return this;
			// do not execute when control is in read-only mode
			if (control.readOnly) return;
			// clear selection
			control.current = null;
			// programmatically (based on user input)
			if (typeof value != 'undefined' || this.length > 1) {
				// select by index (0 based)
				if (typeof value == 'number')
					return $(control.stars[value]).rating('select', undefined, wantCallBack);
				// select by literal value (must be passed as a string
				if (typeof value == 'string') {
					//return
					$.each(control.stars, function() {
						//console.log($(this).data('rating.input'), $(this).data('rating.input').val(), value, $(this).data('rating.input').val()==value?'BINGO!':'');
						if ($(this).data('rating.input').val() == value) $(this).rating('select', undefined, wantCallBack);
					});
					// don't break the chain
					return this;
				}
			} else {
				control.current = this[0].tagName == 'INPUT' ?
					this.data('rating.star') :
					((this.is('.rater-' + control.serial) || this.is('.rater-cancel-' + control.serial)) ? this : null);
			}
			// Update rating control state
			this.data('rating', control);
			// Update display
			this.rating('draw');
			// find current input and its sibblings
			var current = $(control.current ? control.current.data('rating.input') : null);
			var lastipt = $(control.inputs).filter(':checked');
			var deadipt = $(control.inputs).not(current);
			// check and uncheck elements as required
			deadipt.prop('checked', false); //.removeAttr('checked');
			current.prop('checked', true); //.attr('checked','checked');
			// trigger change on current or last selected input
			$(current.length ? current : lastipt).trigger({
				type: 'change',
				selfTriggered: true
			});
			// click callback, as requested here: http://plugins.jquery.com/node/1655
			if ((wantCallBack || wantCallBack === undefined) && control.callback) control.callback.apply(current[0], [current.val(), $('a', control.current)[0]]); // callback event
			// don't break the chain
			return this;
		}, // $.fn.rating.select





		readOnly: function(toggle, disable) { // make the control read-only (still submits value)
			var control = this.data('rating');
			if (!control) return this;
			// setread-only status
			control.readOnly = toggle || toggle === undefined ? true : false;
			// enable/disable control value submission
			if (disable) {
				$(control.inputs).attr("disabled", "disabled");
			} else {
				$(control.inputs).removeAttr("disabled");
			}
			// Update rating control state
			this.data('rating', control);
			// Update display
			this.rating('draw');
		}, // $.fn.rating.readOnly

		disable: function() { // make read-only and never submit value
			this.rating('readOnly', true, true);
		}, // $.fn.rating.disable

		enable: function() { // make read/write and submit value
			this.rating('readOnly', false, false);
		} // $.fn.rating.select
	});

	/*--------------------------------------------------------*/

	/*
		### Default Settings ###
		eg.: You can override default control like this:
		$.fn.rating.options.cancel = 'Clear';
	*/
	$.fn.rating.options = { //$.extend($.fn.rating, { options: {
		cancel: 'Cancel Rating', // advisory title for the 'cancel' link
		cancelValue: '', // value to submit when user click the 'cancel' link
		split: 0, // split the star into how many parts?

		// Width of star image in case the plugin can't work it out. This can happen if
		// the jQuery.dimensions plugin is not available OR the image is hidden at installation
		starWidth: 16 //,

		//NB.: These don't need to be pre-defined (can be undefined/null) so let's save some code!
		//half:     false,         // just a shortcut to control.split = 2
		//required: false,         // disables the 'cancel' button so user can only select one of the specified values
		//readOnly: false,         // disable rating plugin interaction/ values cannot be.one('change',		//focus:    function(){},  // executed when stars are focused
		//blur:     function(){},  // executed when stars are focused
		//callback: function(){},  // executed when a star is clicked
	}; //} });

	/*--------------------------------------------------------*/


	// auto-initialize plugin
	$(function() {
		$('input[type=radio].star').rating();
	});

	/*# AVOID COLLISIONS #*/
})(jQuery);
/*# AVOID COLLISIONS #*/
</script>
<!-- End Star rating JS -->

<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>

<script>
   $('.like-form').submit(function(e){
      e.preventDefault()
      //console.log('works')
      const post_id = $(this).attr('id')
      //console.log(post_id)
      const liketext = $(`.like-btn${post_id}`).html()
      //console.log(liketext)
      const trim = $.trim(liketext)
      //console.log(trim)
      const url = $(this).attr('action')
      //console.log(url)
      let res;
      const likes = $(`.like-count${post_id}`).text()
      //console.log(likes + 1)
      const trimCount = parseInt(likes)
      //console.log(trimCount + 1)

      $.ajax(
         {
         type : "POST",
         url : url,
         data : {
            'csrfmiddlewaretoken':$('input[name=csrfmiddlewaretoken]').val(),
            'post_id':post_id,
         },
         success: function(response){
            //console.log('success', response)
            if(trim === '<i class="fa-solid fa-thumbs-down"></i>') {
               $(`.like-btn${post_id}`).html('<i class="fa-solid fa-thumbs-up"></i>')
               res = trimCount - 1
            } else {
               $(`.like-btn${post_id}`).html('<i class="fa-solid fa-thumbs-down"></i>')
               res = trimCount + 1
            }

           $(`.like-count${post_id}`).text(res)
         },
         error: function(response) {
            console.log('error', response)
        }
      }
      )

   })
</script>

{% endblock content %}